version: '3'
services:
  java_1:
    build:
      context: ./java
    image: var-tool/rmichat_java:latest
    volumes:
      - ../../submissions/${USER_TOKEN}/rmi-chat/1:/app/data:ro
    container_name: ${COMPOSE_PROJECT_NAME}_java_1
    networks:
      - user
    # environment:
    #   KAFKA_HOSTNAME=${COMPOSE_PROJECT_NAME}_kafka_1
    #   USER_NETWORK=user-${USER_TOKEN}
    #   USER_TOPIC=user-${USER_TOKEN}
    # CONTAINER_COMMAND="command -option=foo ${FILE_1} && tail -f ${CONFIG_FILE_1}"
    # CONTAINER_COMMAND="command -option=foo ${FILE_1}"
    # command: ${CONTAINER_COMMAND} | kafkacat -b ${KAFKA_HOSTNAME} -t ${USER_TOPIC}

networks:
  user:
    external:
      name: ${COMPOSE_PROJECT_NAME}

# volumes:
#   data:
#     external: true
